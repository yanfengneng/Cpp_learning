- [一、面向过程（类外部）](#一面向过程类外部)
	- [1.1 静态全局变量](#11-静态全局变量)
	- [补充下C/C++程序的内存布局](#补充下cc程序的内存布局)
	- [1.2 静态局部变量](#12-静态局部变量)
	- [1.3 静态函数](#13-静态函数)
- [二、面向对象（类内部）](#二面向对象类内部)
	- [2.1 静态成员变量](#21-静态成员变量)
	- [2.2 静态成员函数](#22-静态成员函数)


参考：

* [C/C++ 中的static关键字](https://zhuanlan.zhihu.com/p/37439983)
* [C++ Static关键字作用介绍](https://blog.csdn.net/u011718663/article/details/118218407)

**static 关键字根据放在类的内部和外部，分为面向对象和面向过程两部分。**

# 一、面向过程（类外部）

## 1.1 静态全局变量

<font color=alice>**定义**：在全局变量之前加上关键字 static，则该全局变量就被声明为一个**静态的全局变量**了。</font>

```c++
// File1
#include <iostream.h> 

void fn()
{
	n++;
	cout << n << endl;
} 

/* 该变量被存放在全局数据区，该变量仅仅在 File1 文件中是可见的，而在 File1 文件之外是不可见的，这样做的好处是静态全局变量不能被其它文件所使用，其他文件也可以使用相同名字的变量，不会发生冲突。 */
static int n; // 定义静态全局变量 

void main()
{
	n=20;
	cout << n << endl;
	fn();
} 
```

***

**特点：**

* 1）该变量在全局数据区分配内存；
* 2）未经初始化的静态全局变量会被程序自动初始化为0（自动变量的自动初始化值是随机的）；
* 3）静态全局变量在声明它的整个文件都是可见的，而在文件之外是不可见的；
* 4）静态变量都在全局数据区分配内存，包括后面将要提到的静态局部变量。对于一个完整的程序，在内存中的分布情况如下：【代码区】【全局数据区】【堆区】【栈区】，一般程序的由new产生的动态数据存放在堆区，函数内部的自动变量存放在栈区，静态数据（即使是函数内部的静态局部变量）存放在全局数据区。自动变量一般会随着函数的退出而释放空间，而全局数据区的数据并不会因为函数的退出而释放空间。

## 补充下C/C++程序的内存布局

[C++类对象的内存布局](https://blog.csdn.net/dxpqxb/article/details/102794132)、[第5篇:C/C++ 内存布局与程序栈](https://zhuanlan.zhihu.com/p/184957568)

**代码段**：程序的所有指令都会存放在这个区域，这是已经被编译后的机器码。

**文本段**：即字面量池，程序初始化时的一些字符串字面量，在程序中用于显示文字。

**全局数据段**：用来存储程序初始化时的常量、全局变量、静态全局变量。C/C++ 用global/static声明的变量都存放在这个区域，对所有函数（当前文件内的所有函数）公开可见。

**堆**：由 new、malloc来申请得到的内存块，该内存块的释放由程序员进行手动释放。若程序员没有手动释放掉该内存，则在程序结束后由 OS 自动进行回收。

**栈**：在执行函数时，函数内局部变量的存储单元都可以在栈上创建，函数执行结束时这些存储单元自动被释放。栈内存分配运算内置于处理器的指令集中，效率很高，用来存储该程序的“上下文”，从高地址向低地址进行扩展。**上下文的意思其实就是程序中各个函数之间调用的先后顺序。**

windows 蓝屏的原因：是因为内存不足了，也就是栈区和堆区碰面了，导致无可用空间了。



![image-20231019154537601](Image/C++内存布局.png)

***

定义全局变量就可以实现变量在文件中的共享，但定义静态全局变量还有以下好处：

* 1）静态全局变量不能被其他文件所使用；
* 2）其它文件中可以定义相同名字的变量，不会发生冲突；

静态全局变量与全局变量的区别：

* <font color=blue>在一个文件中，静态全局变量和全局变量功能相同；而在两个文件中，要使用同一个变量，则只能使用全局变量而不能使用静态全局变量（在其他文件中使用关键字 extern 来实现在两个文件中公用一个全局变量）。</font>

***

## 1.2 静态局部变量

## 1.3 静态函数



# 二、面向对象（类内部）

## 2.1 静态成员变量

## 2.2 静态成员函数

